<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UBuilder / Router / UI</title>
</head>

<body>
    <h1 id="ui">UI</h1>
    <p>
        The UI section of the UBuilder framework provides you with five important
        functions that you can use:
    </p>
    <ul>
        <li><code>tag</code></li>
        <li><code>renderTemplate</code></li>
        <li><code>renderStyles</code></li>
        <li><code>renderScripts</code></li>
        <li><code>html</code></li>
    </ul>

    <h2 id="tag">tag</h2>
    <p>
        The <code>tag</code> function is used to create an object representing an
        HTML tag. It takes the following arguments:
    </p>
    <pre><code class="lang-javascript"><span ><span >tag</span>(<span >tagName, props, ...slots</span>)</span>
</code></pre>
    <ul>
        <li><code>tagName</code>: The name of the HTML tag.</li>
        <li>
            <code>props</code>: An object containing the props or attributes for the
            tag.
        </li>
        <li>
            <code>slots</code>: Additional arguments that can be used for slots
            within the tag.
        </li>
    </ul>
    <p>Here&#39;s an example:</p>
    <pre><code class="lang-javascript"><span >const</span> Hello = tag(<span >'div'</span>, { <span >class</span>: <span >'text-red'</span> }, <span >'Hello'</span>);
</code></pre>
    <p>The above code will return the following object:</p>
    <pre><code class="lang-javascript">{
    <span >"tag"</span>: <span >"div"</span>,
    <span >"props"</span>: {
        <span >"class"</span>: <span >"text-red"</span>
    },
    <span >"slots"</span>: [
        <span >"Hello"</span>
    ]
}
</code></pre>
    <h2 id="rendertemplate">renderTemplate</h2>
    <p>
        The <code>renderTemplate</code> function converts a tag object into an
        HTML string. It takes the tag object as input and returns the
        corresponding HTML representation.
    </p>
    <pre><code class="lang-javascript"><span >const HelloHtml</span> = renderTemplate(Hello);
</code></pre>
    <p>The above code will generate the following HTML string:</p>
    <pre><code class="lang-html">&lt;<span >div</span> <span >class</span>=<span >"text-red"</span>&gt;Hello&lt;/<span >div</span>&gt;
</code></pre>
    <h2 id="renderstyles">renderStyles</h2>
    <p>
        The <code>renderStyles</code> function extracts and combines the styles
        from tag objects. It takes the tag object as input and returns a string
        containing the CSS styles.
    </p>
    <pre><code class="lang-javascript"><span >const styles</span> = renderStyles(Hello);
</code></pre>

    <h2 id="renderscripts">renderScripts</h2>
    <p>
        The <code>renderScripts</code> function is used to extract and combine
        JavaScript code from tag objects. It is particularly useful when you have
        interactive components that require custom JavaScript functionality. The
        function takes the tag object as input and returns a string containing the
        JavaScript code.
    </p>
    <pre><code class="lang-javascript"><span class="hljs-attribute">const scriptString</span> = renderScripts(tagObject);
</code></pre>
    <p>
        The <code>tagObject</code> parameter represents the tag object containing
        the component and its associated JavaScript code. The
        <code>renderScripts</code> function scans the tag object for any
        properties related to JavaScript code execution, such as
        <code>scriptName</code> and <code>script</code>. It then extracts and
        combines the JavaScript code into a single string.
    </p>
    <h3 id="syntax-for-defining-javascript-code-in-tag-objects">
        Syntax for Defining JavaScript Code in Tag Objects
    </h3>
    <p>
        When creating a tag object that includes JavaScript code, you can use the
        following properties:
    </p>
    <ul>
        <li>
            <code>scriptName</code>: A unique identifier for the JavaScript code
            block. This property is not rendered in the template and is used
            internally by the framework.
        </li>
        <li>
            <code>scriptProps</code>: An optional object containing any additional
            properties that should be passed to the JavaScript code block. These
            properties can be accessed within the <code>script</code> function.
        </li>
        <li>
            <code>script</code>: A function representing the JavaScript code block.
            It takes the element associated with the tag object as the first
            argument and can access any additional properties defined in
            <code>scriptProps</code>.
        </li>
    </ul>
    <p>Here&#39;s an example:</p>
    <pre><code class="lang-javascript">const tagWithScript = tag('div', {
    scriptName: 'hello',
    scriptProps: { value: <span class="hljs-number">123</span> },
    script(<span class="hljs-name">el</span>, props) {
        console.log('Hello World', props.value)<span class="hljs-comment">;</span>
    }
}, 'Check Console logs')<span class="hljs-comment">;</span>
</code></pre>
    <p>
        In this example, the <code>tagWithScript</code> object includes a
        JavaScript code block. The <code>scriptName</code> property provides a
        unique identifier for this code block. The
        <code>scriptProps</code> property defines additional properties that can
        be accessed within the <code>script</code> function. Finally, the
        <code>script</code> function contains the actual JavaScript code.
    </p>
    <h3 id="using-renderscripts-to-retrieve-javascript-code">
        Using <code>renderScripts</code> to Retrieve JavaScript Code
    </h3>
    <p>
        To retrieve the JavaScript code from the tag object, you can call the
        <code>renderScripts</code> function, passing the tag object as the
        argument:
    </p>
    <pre><code class="lang-javascript"><span class="hljs-attribute">const scriptString</span> = renderScripts(tagWithScript);
</code></pre>
    <p>
        The <code>scriptString</code> variable will then contain a valid
        JavaScript code string that you can insert into a
        <code>&lt;script&gt;</code> tag in your HTML document. This allows you to
        execute the JavaScript code associated with the tag object.
    </p>
    <p>
        Remember to include the generated <code>scriptString</code> within a
        <code>&lt;script&gt;</code> tag in your HTML document to ensure the
        JavaScript code is properly executed.
    </p>
    <pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
    <span class="hljs-comment">// Insert the scriptString here</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
    <p>
        This way, the JavaScript code associated with the tag object will be
        executed when the page loads, enabling the desired interactive behavior.
    </p>

    <h2 id="html">html</h2>
    <p>
        The <code>html</code> function is used to render a tag object directly
        into the DOM. It takes the tag object as input and inserts it into the
        specified element in the document.
    </p>
    <pre><code class="lang-javascript">html(<span >element</span>, tagObject)<span >;</span>
</code></pre>
    <ul>
        <li>
            <code>element</code>: The DOM element where the tag object should be
            inserted.
        </li>
        <li><code>tagObject</code>: The tag object to be rendered.</li>
    </ul>
    <hr />


    <h3>Example:</h3>
    <p>Here is an example for Toggle component which uses all of the provided methods:</p>
    <pre>
        <code>
            import { renderTemplate } from "../src/ui/index.js";
            import { renderScripts } from "../src/ui/index.js";
            import { tag, html } from "../src/ui/tags.js";
            
            const Toggle = () => {
              const toggleButton = tag(
                "button",
                {
                  scriptName: "toggle-button",
                  script(el) {
                    const contentElement = document.getElementById("toggle-content");
                    el.addEventListener("click", () => {
                      if (contentElement.style.display === "none") {
                        contentElement.style.display = "block";
                      } else {
                        contentElement.style.display = "none";
                      }
                    });
                  },
                },
                "Toggle"
              );
            
              const content = tag(
                "div",
                {
                  id: "toggle-content",
                  style: { display: "none" },
                },
                "Toggleable Content"
              );
            
              const scriptString = renderScripts(toggleButton);
            
              const script = tag("script", {}, scriptString);
              const page = html({ body: [toggleButton, content, script] });
            
              return renderTemplate(page); // returns html
            };
            
            console.log(Toggle());
            
    </code>
</pre>
    Here you can see live demo:
    <a href="/router/toggle.html">Toggle Example</a>

    <h2>Counter example</h2>
    <pre><code>
        import { tag, renderScripts, renderTemplate, html } from "../src/ui/index.js";

function Counter({ count = 0 }) {
  return tag(
    "div",
    {
      scriptName: "u-counter",
      scriptProps: { count },
      script(el, { count }) {
        function $(selector, callback) {
            el.querySelectorAll(selector).forEach(el => callback(el))
        }
        function on(element, event, callback) {
            element.addEventListener(event, callback)
        }
        function attr(element, attribute) {
            return element.getAttribute(attribute)
        }

        setCount(count);
        function setCount(newValue) {
          count = newValue;
          $("[u-count]", el => el.textContent = count);
        }

        $("[u-action]", (button) => {
          on(button, "click", (event) => {
            const action = attr(button, "u-action");

            if (action === "decrement") {
              setCount(count - 1);
            } else if (action === "increment") {
              setCount(count + 1);
            } else {
              setCount(0);
            }
          });
        });
      },
    },
    [
      tag("h1", {}, ["Value: ", tag("span", { "u-count": true })]),
      tag("button", { "u-action": "decrement" }, "Decrement"),
      tag("button", { "u-action": "reset" }, "Reset"),
      tag("button", { "u-action": "increment" }, "Increment"),
    ]
  );
}

const counter = Counter({ count: 6 });
const counterScript = tag("script", {}, renderScripts(counter));
const counterTemplate = renderTemplate(counter);
const counterHTML = html({
  body: [counterTemplate, counterScript],
});

console.log(renderTemplate(counterHTML));

    </code></pre>
    <a href="/router/counter.html">Counter Example</a>


</body>


</html>